"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.jsonBodyMiddleware = exports.app = void 0;
const express_1 = __importDefault(require("express"));
const cookie_parser_1 = __importDefault(require("cookie-parser"));
const settings_1 = require("./settings");
const blogsController_1 = require("./services/blogs/blogsController");
const postControllers_1 = require("./services/posts/postControllers");
const usersControllers_1 = require("./services/users/usersControllers");
const authControllers_1 = require("./services/auth/authControllers");
const testsController_1 = require("./services/tests/testsController");
const commentsControllers_1 = require("./services/comments/commentsControllers");
const secutityController_1 = require("./services/usersSessions/secutityController");
const globalRequestLimitMiddleware_1 = require("./middlewares/globalRequestLimitMiddleware");
exports.app = (0, express_1.default)();
exports.jsonBodyMiddleware = express_1.default.json();
exports.app.set('trust proxy', true);
exports.app.use(exports.jsonBodyMiddleware);
exports.app.use((0, cookie_parser_1.default)());
exports.app.use(globalRequestLimitMiddleware_1.globalRequestLimitMiddleware);
exports.app.get('/', (req, res) => { res.send('Hello Samurai'); });
exports.app.use(settings_1.SETTINGS.RouterPath.auth, (0, authControllers_1.authControllers)());
exports.app.use(settings_1.SETTINGS.RouterPath.users, (0, usersControllers_1.usersControllers)());
exports.app.use(settings_1.SETTINGS.RouterPath.blogs, (0, blogsController_1.blogsControllers)());
exports.app.use(settings_1.SETTINGS.RouterPath.posts, (0, postControllers_1.postsControllers)());
exports.app.use(settings_1.SETTINGS.RouterPath.comments, (0, commentsControllers_1.commentsControllers)());
exports.app.use(settings_1.SETTINGS.RouterPath.security, (0, secutityController_1.secutityControllers)());
exports.app.use(settings_1.SETTINGS.RouterPath.__test__, (0, testsController_1.testsController)());
